<%= render partial: 'application/jumbotron', locals: {jumbo: 'jumbotron-juice', header: @juice.name} %>
<div class="container">
  <div class="row row-centered">
    <h2 align="center">Ingredients</h2>
    <div class="col-xs-8 col-md-8 col-md-offset-2 juice-produce">
      <% @juice_produce.each do |juice_prod| %>
      <div class="col-xs-4 col-centered">
        <h3 align="center" class="produceQuantity"><%= juice_prod.quantity %> <%= juice_prod.produce.name %></h3>
        <div class="produce-index-img text-center">
          <%= link_to image_tag(juice_prod.produce.image.thumb.url), produce_path(juice_prod.produce) %>
        </div>
      </div>
      <% end %>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-xs-6 col-md-6 col-md-offset-3">
    <div class="col-xs-4">
      <h4 align="left"><a class="editJuice" href="/juices/<%= @juice.id %>/edit">Edit Juice</a></h4>
    </div>
    <div class="col-xs-4">
      <% if current_user.id == @juice.user_id %>
        <h4 align="center"><a class="deleteJuice" rel="nofollow" data-method="delete" href="/juices/19">Delete Juice</a></h4>
      <% end %>
    </div>
    <div class="col-xs-4">
      <p align="right"><a class="userJuice" href="/users/<%= @juice.id %>/juices">Created by <%= @juice.user.name %></a></p>
    </div>
  </div>
</div>
<br>
<div class="row">
  <div class="col-md-6 col-md-offset-3">
    <div class="col-md-4 col-md-offset-4">
      <a href="#" class="previous" data-id="<%= @juice.id %>">Previous Juice  </a>
      ------<a href="#" class="next" data-id="<%= @juice.id %>">  Next Juice</a>
    </div>
  </div>
</div>

<script type="text/javascript">
  $('.previous').on('click', function(e) {
    e.preventDefault();
    var prevId = parseInt($(this).attr("data-id")) - 1;
    $.get('/juices/' + prevId + ".json", function(data) {
      var juice = data
      $('.jumbo-header').text(juice.name);
      $('.juice-produce').empty();
      $.each(juice.juice_produce, function(index, jp) {
        var content = '<div class="col-xs-4 col-centered">';
        content += '<h3 align="center" class="produceQuantity">' + jp.quantity + " " + juice.produce[index].name + '</h3>';
        content += '<div class="produce-index-img text-center">';
        content += '<a href="/produce/"' + juice.produce[index].id + '><img src=' + juice.produce[index].image.image.thumb.url + '></a>';
        content += '</div>';
        content += '</div>';
        $('.juice-produce').append(content);
      });
      $('.editJuice').attr('href', "/juices/" + juice.id + "/edit");
      $('.userJuice').attr('href', "/users/" + juice.user_id + "/juices").text("Created by " + juice.user.name);
      $('.deleteJuice').attr('href', '/juices/' + juice.id)
    });

  });
</script>
